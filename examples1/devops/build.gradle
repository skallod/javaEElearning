/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds/
 */
plugins {
    id 'base'
//    //id 'war'
    id 'org.hidetake.ssh' version '2.9.0'
}
group = 'ru.galuzin.devops'
remotes {
  webServer {
    host = '192.168.165.4'
    user = 'root'
    identity = file('c:/Dev/Doc/SSH_keys/local_vm/1005')
  }
}
task deploy {
  doLast {
    ssh.run {
      session(remotes.webServer) {
        //good - owner not changed
        put from: 'devops/postgres/postgresql.conf', into: '/etc/postgresql/9.6/main'
        execute 'service postgresql restart'
//        execute 'chmod +x /tmp/nginx.sh'
//        get from: '/etc/nginx/nginx.conf', into: 'devops/postgres'
//        get from: '/etc/postgresql/9.6/main/postgresql.conf', into: 'devops/postgres'
      }
    }
  }
}
//
//task copy(type: Copy, group: "Custom", description: "Copies sources to the dest directory") {
//    from "src"
//    into "dest"
//}
//
//task zip(type: Zip, group: "Archive", description: "Archives sources in a zip file") {
//    from "src"
//}
//
