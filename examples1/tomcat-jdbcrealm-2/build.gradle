/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds/
 */
apply plugin: 'war'

group = 'ru.galuzin'
version = '1'
description = """tomcat jdbc realm"""
sourceCompatibility = 1.8
targetCompatibility = 1.8
repositories {
    mavenCentral()
}
dependencies{
    // https://mvnrepository.com/artifact/javax.servlet/javax.servlet-api
    providedCompile group: 'javax.servlet', name: 'javax.servlet-api', version: '3.0.1'
}

task wrapper(type: Wrapper) {
    gradleVersion = '4.7'
}

task copy(type: Copy, group: "Custom", description: "Copies sources to the dest directory") {
    from("build/libs")
    into("build/libs")
    include("tomcat-jdbcrealm-1.war")
    rename("tomcat-jdbcrealm-1.war","ROOT.war")
}

task deploy(type:Copy){
    from("build/libs")
    into("d:\\develop\\apache-tomcat-9.0.10\\webapps")
    include("ROOT.war")
}

copy.dependsOn build
deploy.dependsOn copy
